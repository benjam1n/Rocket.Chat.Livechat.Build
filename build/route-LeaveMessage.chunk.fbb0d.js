(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{Kl3u:function(e,t,r){"use strict";(function(e){r.d(t,"b",function(){return h}),r.d(t,"a",function(){return m});var n=r("gDde"),a=r("qPgm"),o=r("vBLd"),i=r("kQFM"),l=r("VCjn"),u=r("81xT"),s=r("PyG4");function c(){return(c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(t){var r,n;function i(){for(var r,n=arguments.length,i=new Array(n),h=0;n>h;h++)i[h]=arguments[h];return d(f(r=t.call.apply(t,[this].concat(i))||this),"handleSubmit",function(e){return new Promise(function(t,n){var i,l,c,f,d,h,m=function(e){return function(t){try{return Promise.resolve(c({loading:!1})).then(function(){try{return e&&e.call(this,t)}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this)}.bind(this);return l=(i=r.props).alerts,c=i.dispatch,Promise.resolve(c({loading:!0})).then(function(){try{var r=function(e){try{return d=e.data.message,h={id:Object(s.e)(),children:d,error:!0,timeout:5e3},Promise.resolve(c({alerts:(l.push(h),l)})).then(function(){try{return m(t)(!1)}catch(e){return n(e)}},n)}catch(e){return m(n)(e)}};try{return f=Object(s.k)(e),Promise.resolve(a.a.sendOfflineMessage(f)).then(function(n){try{return Promise.resolve(u.a.alert({text:n})).then(function(){try{return Object(o.a)("callback",["offline-form-submit",e]),m(t)(!0)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){r(e)}}catch(e){return n(e)}},n)})}),d(f(r),"render",function(t){return e(l.a,c({},t,{onSubmit:r.handleSubmit}))}),r}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(n.Component),m=function(t){var r=t.ref,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;o.length>n;n++)0>t.indexOf(r=o[n])&&(a[r]=e[r]);return a}(t,["ref"]);return e(i.a,null,function(t){var a=t.config,o=(a=void 0===a?{}:a).departments,i=void 0===o?{}:o,l=a.messages;l=void 0===l?{}:l;var u=a.theme;u=void 0===u?{}:u;var s=a.settings;s=void 0===s?{}:s;var f=t.iframe,d=(f=void 0===f?{}:f).theme,m=(d=void 0===d?{}:d).offlineTitle;return e(h,c({ref:r},n,{theme:{color:u.offlineColor,offlineTitle:m},title:m||u.offlineTitle,message:l.offlineMessage,successMessage:l.offlineSuccessMessage,unavailableMessage:l.offlineUnavailableMessage,loading:t.loading,token:t.token,dispatch:t.dispatch,alerts:t.alerts,hasForm:s.displayOfflineForm,hasDepartmentField:i&&i.some(function(e){return e.showOnOfflineForm}),departments:i.filter(function(e){return e.showOnOfflineForm})}))})};t.c=m}).call(this,r("gDde").h)},VCjn:function(e,t,r){"use strict";(function(e,n){r.d(t,"a",function(){return S});var a=r("gDde"),o=r("co3k"),i=r("z4Qk"),l=r("qoM+"),u=r("jdJj"),s=r("PyG4"),c=r("8SHJ"),f=r.n(c);function d(){return(d=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return e.length>n?{done:!1,value:e[n++]}:{done:!0}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;arguments.length>t;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){g(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=e.t("Leave a message"),O=e.t("We are not online right now. Please, leave a message."),w="",j=n(u.b.Footer,null),S=function(t){var r,a;function c(r){var a;return g(b(a=t.call(this,r)||this),"validations",{name:[l.e.nonEmpty],email:[l.e.nonEmpty,l.e.email],department:[],message:[l.e.nonEmpty]}),g(b(a),"getDefaultState",function(){var e=a.props,t=e.departments,r=null;return e.hasDepartmentField&&t&&t.length>0&&(r={value:""}),{name:{value:""},email:{value:""},department:r,message:{value:""}}}),g(b(a),"getValidableFields",function(){return Object.keys(a.validations).map(function(e){return a.state[e]?p({fieldName:e},a.state[e]):null}).filter(Boolean)}),g(b(a),"validate",function(e){var t=e.value;return a.validations[e.name].reduce(function(e,r){return e||r({value:t})},void 0)}),g(b(a),"validateAll",function(){for(var e,t=h(a.getValidableFields());!(e=t()).done;){var r,n=e.value,o=n.fieldName,i=n.value,l=a.validate({name:o,value:i});a.setState(((r={})[o]=p(p({},a.state[o]),{},{value:i,error:l,showError:!1}),r))}}),g(b(a),"reset",function(){return a.setState(a.getDefaultState())}),g(b(a),"isValid",function(){return a.getValidableFields().every(function(e){return!(void 0===e?{}:e).error})}),g(b(a),"handleFieldChange",function(e){return function(t){var r,n=t.target.value,o=a.validate({name:e,value:n});a.setState(((r={})[e]=p(p({},a.state[e]),{},{value:n,error:o,showError:!1}),r))}}),g(b(a),"handleNameChange",a.handleFieldChange("name")),g(b(a),"handleEmailChange",a.handleFieldChange("email")),g(b(a),"handleDepartmentChange",a.handleFieldChange("department")),g(b(a),"handleMessageChange",a.handleFieldChange("message")),g(b(a),"handleSubmit",function(e){return new Promise(function(t,r){var n;if(e.preventDefault(),a.props.onSubmit)return n=Object.entries(a.state).filter(function(e){return null!==e[1]}).map(function(e){var t;return(t={})[e[0]]=e[1].value,t}).reduce(function(e,t){return p(p({},e),t)},{}),Promise.resolve(a.props.onSubmit(n)).then(function(e){try{return e&&a.reset(),o.call(this)}catch(e){return r(e)}}.bind(this),r);function o(){return t()}return o.call(this)})}),g(b(a),"renderForm",function(t,r){var u=t.loading,c=t.departments,f=t.valid,d=void 0===f?a.isValid():f,h=r.name,m=r.email,v=r.department,p=r.message;return n(l.a,{onSubmit:a.handleSubmit},h?n(l.b,{required:!0,label:e.t("Name"),error:h.showError&&h.error},n(l.d,{name:"name",value:h.value,placeholder:e.t("Insert your %{field} here...",{field:e.t("Name")}),disabled:u,onInput:a.handleNameChange})):null,m?n(l.b,{required:!0,label:e.t("Email"),error:m.showError&&m.error},n(l.d,{name:"email",value:m.value,placeholder:e.t("Insert your %{field} here...",{field:e.t("Email")}),disabled:u,onInput:a.handleEmailChange})):null,v?n(l.b,{label:e.t("I need help with..."),error:v.showError&&v.error},n(l.c,{name:"department",value:v.value,options:Object(s.m)(c,"name").map(function(e){return{value:e._id,label:e.name}}),placeholder:e.t("Choose an option..."),disabled:u,error:v.showError,onInput:a.handleDepartmentChange})):null,p?n(l.b,{required:!0,label:e.t("Message"),error:p.showError&&p.error},n(l.d,{name:"message",value:p.value,multiline:!0,rows:4,placeholder:e.t("Write your message..."),disabled:u,error:p.showError,onInput:a.handleMessageChange})):null,n(i.a,null,n(o.a,{submit:!0,loading:u,disabled:!d||u,stack:!0},e.t("Send"))))}),g(b(a),"render",function(e){var t=e.color,r=e.title,o=e.message,i=e.unavailableMessage,l=e.hasForm,c=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;o.length>n;n++)0>t.indexOf(r=o[n])&&(a[r]=e[r]);return a}(e,["color","title","message","unavailableMessage","hasForm"]);return n(u.b,d({color:t,title:r||y,className:Object(s.d)(f.a,"leave-message")},c),n(u.b.Content,null,n("p",{className:Object(s.d)(f.a,"leave-message__main-message")},l?o||O:i||w),l&&a.renderForm(a.props,a.state)),j)}),a.setState(a.getDefaultState()),a.validateAll(),a}return a=t,(r=c).prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a,c}(a.Component)}).call(this,r("fsQa").default,r("gDde").h)},ag5X:function(e,t,r){"use strict";r.r(t);var n=r("VCjn");r.d(t,"LeaveMessage",function(){return n.a});var a=r("Kl3u");r.d(t,"LeaveMessageContainer",function(){return a.b}),r.d(t,"LeaveMessageConnector",function(){return a.a}),r.d(t,"default",function(){return a.c})}}]);